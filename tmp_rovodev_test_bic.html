<!DOCTYPE html>
<html>
<head>
    <title>BIC Calculation Test</title>
</head>
<body>
    <h1>BIC Calculation Test</h1>
    <div id="results"></div>

    <script>
        // Calculate BIC/SWIFT code from IBAN
        function calculateBICFromIBAN(iban) {
            if (!iban || iban.length < 8) {
                return 'UNKNOWN';
            }
            
            // Extract components from IBAN
            const countryCode = iban.substring(0, 2);  // GB
            const checkDigits = iban.substring(2, 4);  // 20
            const bankCode = iban.substring(4, 8);     // HLFX
            
            // BIC format: {bank_code}{country_code}{check_digits}
            const bic = bankCode + countryCode + checkDigits;
            
            console.log('🏦 BIC Calculation:');
            console.log('📄 IBAN:', iban);
            console.log('🌍 Country Code:', countryCode);
            console.log('🔢 Check Digits:', checkDigits);
            console.log('🏛️ Bank Code:', bankCode);
            console.log('🆔 Generated BIC:', bic);
            
            return bic;
        }

        // Test cases
        const testCases = [
            { iban: 'GB20HLFX11170214114666', expectedBIC: 'HLFXGB20' },
            { iban: 'GB29NWBK20000055779911', expectedBIC: 'NWBKGB29' },
            { iban: 'GB82WEST12345698765432', expectedBIC: 'WESTGB82' }
        ];

        let results = '<h2>Test Results:</h2>';
        
        testCases.forEach((test, index) => {
            const calculatedBIC = calculateBICFromIBAN(test.iban);
            const passed = calculatedBIC === test.expectedBIC;
            
            results += `<p><strong>Test ${index + 1}:</strong><br>`;
            results += `IBAN: ${test.iban}<br>`;
            results += `Expected BIC: ${test.expectedBIC}<br>`;
            results += `Calculated BIC: ${calculatedBIC}<br>`;
            results += `Result: <span style="color: ${passed ? 'green' : 'red'}">${passed ? 'PASS' : 'FAIL'}</span></p>`;
        });

        document.getElementById('results').innerHTML = results;
    </script>
</body>
</html>